"use strict";angular.module("meanr",["ngCookies","ngSanitize","ngRoute","gettext","restangular","meanr.services"]).run(["gettextCatalog",function(a){a.currentLanguage="English"}]).run(["$rootScope",function(a){a.$on("$viewContentLoaded",function(){$(document).foundation()})}]),angular.module("meanr.services",["meanr.service.global","meanr.service.go"]),angular.module("meanr").config(["RestangularProvider",function(a){a.setBaseUrl("/api/v1")}]),angular.module("meanr").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/404",{templateUrl:"views/404.html"}).when("/signin",{templateUrl:"views/users/signin.html",controller:"UsersCtrl"}).when("/signup",{templateUrl:"views/users/signup.html",controller:"UsersCtrl"}).when("/language",{templateUrl:"views/language.html"}).when("/about",{templateUrl:"views/about.html"}).when("/articles",{templateUrl:"views/articles/list.html",controller:"ArticlesListCtrl"}).when("/articles/create",{templateUrl:"/articles/create",controller:"ArticlesCreateCtrl"}).when("/articles/:articleId/edit",{templateUrl:"/articles/edit",controller:"ArticlesEditCtrl"}).when("/articles/:articleId",{templateUrl:"views/articles/show.html",controller:"ArticlesShowCtrl"}).otherwise({redirectTo:"/404"})}]),angular.module("meanr.service.global",[]).factory("Global",["$window",function(a){var b=a.user,c=a.applicationTitle,d=a.sessionState;return{currentUser:function(){return b},isSignedIn:function(){return!!b},applicationTitle:function(){return c},sessionState:function(){return d},setSessionState:function(a,b){d[a]=b}}}]),angular.module("meanr.service.go",[]).factory("Go",["$window","$location","$route","$routeParams","Global",function(a,b,c,d,e){var f=e;return{to:function(a,d,e,g){d&&(a=a+"/"+d),b.path()===a?c.reload():("back"===e&&f.setSessionState("back",!0),g&&f.setSessionState("pageNumber",+g),b.path(a))},back:function(){f.sessionState().back?a.history.go(-1):b.path("/")}}}]);var meanr=angular.module("meanr");meanr.directive("focus",function(){return function(a,b){b.focus()}}),meanr.directive("lateValidateForm",function(){return{restrict:"AC",link:function(a,b){var c=b.find("input, select, textarea");c.on("focus",function(){a.formElementHasStates.push(this.id+"-has-focus")}),c.on("blur",function(){var b=this.id+"-has-visited",c=this.id+"-has-focus";_.contains(a.formElementHasStates,b)||a.formElementHasStates.push(b);var d=a.formElementHasStates.indexOf(c);a.formElementHasStates.splice(d,1)})}}}),meanr.directive("clearServerSideValidation",function(){return{restrict:"A",link:function(a,b){b.on("focus",function(){var a="#"+this.id+".error";$(a).remove()})}}}),meanr.directive("displayServerSideErrors",function(){return{restrict:"A",link:function(a,b){a.$watch(function(){return a.formValidationErrors},function(a){angular.forEach(a,function(a){var b="#"+a.path;$(b).after('<small id="'+a.path+'" class="error">* '+a.message+"</small>")})}),b.on("submit",function(){$(".error").remove(),$("#submit").focus()})}}}),angular.module("meanr").controller("HeaderCtrl",["$scope","Global","$location","$route","gettextCatalog",function(a,b,c,d,e){a.global=b,a.changeLanguage=function(a){e.currentLanguage=a,c.path().match(/edit$/)&&d.reload()}}]),angular.module("meanr").controller("MainCtrl",["$scope",function(a){a.awesomeThings={angularjs:["AngularJS","HTML5 Boilerplate","Zurb Foundation 5","Restangular","Angular-get-text i18n","Karma Unit Tests","Protractor End-to-End Tests","Sauce Labs End-to-End Tests"],nodejs:["Express","Mongoose","PassportJS","Grunt","Bower","Promises","scrypt","Mocha","ChaiJS"],storage:["MongoDB","Redis (sessions)","Loggly.com (logs)"],deployment:["JS concat and minify","CSS concat and minify","Development","Staging","QA","Production","Deployment with Capistrano"],devops:["VirtualBox","Vagrant","Amazon EC2","Chef-Solo","ServerSpec","ChefSpec","Datadog.com","MongoDB Management Service"]}}]),angular.module("meanr").controller("UsersCtrl",["$scope","$cookies","$location",function(a,b,c){a.csrfToken=b["XSRF-TOKEN"],a.message="",a.formElementHasStates=[],a.showLoginErrorMessage=function(){var b=c.search();"E1100"===b.msg?a.message="Error: Duplicate. This account already exists.":"error"===b.msg&&(a.message="Invalid email or password.")},a.canSave=function(){return a.signinForm.$dirty&&a.signinForm.$valid},a.showClientSideValidationErrors=function(b,c){var d=b.$name+"-has-visited",e=b.$name+"-has-focus";return _.contains(a.formElementHasStates,d)&&!_.contains(a.formElementHasStates,e)?b.$error[c]:null}}]),angular.module("meanr").controller("ArticlesListCtrl",["$scope","Global","Restangular","Go",function(a,b,c,d){a.global=b,a.go=d,c.one("articles").get().then(function(b){a.articles=_.toArray(b)})}]),angular.module("meanr").controller("ArticlesCreateCtrl",["$scope","Restangular","$location",function(a,b,c){a.formValidationErrors=[],a.formElementHasStates=[],a.create=function(){var d=[],e={title:this.title,content:this.content};b.all("articles").post(e).then(function(b){a.title="",a.content="",c.path("/articles/"+b._id)},function(b){var c={};if(b.data.message)c.path="Error",c.type=b.data.message,d.push(c);else for(var e in b.data)c={},c.path=b.data[e].path,c.message=b.data[e].message,d.push(c);a.formValidationErrors=d})},a.canSave=function(){return a.articleForm.$dirty&&a.articleForm.$valid},a.showClientSideValidationErrors=function(b,c){var d=b.$name+"-has-visited",e=b.$name+"-has-focus";return _.contains(a.formElementHasStates,d)&&!_.contains(a.formElementHasStates,e)?b.$error[c]:null}}]),angular.module("meanr").controller("ArticlesShowCtrl",["$scope","Global","$routeParams","Go","Restangular",function(a,b,c,d,e){a.global=b,a.go=d,e.one("articles").one(c.articleId).get().then(function(b){a.article=b})}]),angular.module("meanr").controller("ArticlesEditCtrl",["$scope","Global","$cookies","Restangular","$routeParams","$location",function(a,b,c,d,e,f){a.global=b,a.csrfToken=c["XSRF-TOKEN"],a.formValidationErrors=[],a.formElementHasStates=[],a.articleOrig={},d.one("articles").one(e.articleId).get().then(function(b){a.article=b,a.articleOrig=_.pick(b,"title","content"),a.canUpdate=function(){return a.article.title!==a.articleOrig.title||a.article.content!==a.articleOrig.content?!0:!1}}),a.update=function(){var b=a.article,c=[];b.put().then(function(){f.path("/articles/"+b._id)},function(b){var d={};if(b.data.message)d.path="Error",d.type=b.data.message,c.push(d);else for(var e in b.data)d={},d.path=b.data[e].path,d.message=b.data[e].message,c.push(d);a.formValidationErrors=c})},a.remove=function(a){a.remove().then(function(){f.path("/articles")})}}]),angular.module("gettext").run(["gettextCatalog",function(a){a.setStrings("English",{"About Us":"","Application with":"",Articles:"",Back:"",Content:"",Create:"","Create Article":"","Create Date":"","Create One":"","Create a new Article":"",Delete:"",Deployment:"",Edit:"","Edit Article":"",Email:"",English:"","Full Name":"",Language:"","MEANR Stack":"",Menu:"",Password:"","Sign In":"","Sign Out":"","Sign Up":"",Spanish:"",Storage:"","There are no articles yet.":"",Title:"",Update:"",User:"",Username:"","Why don't you":"","for Deployment":""}),a.setStrings("Spanish",{"About Us":"Sobre Nosotros","Application with":"Aplicación con",Articles:"Artículos",Back:"De vuelta",Content:"Contenido",Create:"Crear","Create Article":"Crear Artículo","Create Date":"Fecha de Creación","Create One":"Crear una","Create a new Article":"Crear un Nuevo Artículo",Delete:"Borrar",Deployment:"Despliegue",Edit:"Editar","Edit Article":"Modificar el Artículo",Email:"",English:"Inglés","Full Name":"Nombre Completo",Language:"Idioma","MEANR Stack":"",Menu:"Menú",Password:"Contraseña","Sign In":"Registrarse","Sign Out":"Salir","Sign Up":"Regístrese",Spanish:"Español",Storage:"Almacenamiento","There are no articles yet.":"No hay artículos todavía.",Title:"Título",Update:"Actualización",User:"Usuario",Username:"Nombre de usuario","Why don't you":"Por qué no","for Deployment":"para la implementación"})}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#"),angular.bootstrap(document,["meanr"]),document.getElementById("meanrAppBody").className="ng-app"});